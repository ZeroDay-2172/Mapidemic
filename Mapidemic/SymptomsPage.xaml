<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                xmlns:popup="clr-namespace:Syncfusion.Maui.Popup;assembly=Syncfusion.Maui.Popup"
                xmlns:local="clr-namespace:Mapidemic"
                xmlns:models="clr-namespace:Mapidemic.Models"
                x:DataType="models:BusinessLogic"
                x:Class="Mapidemic.SymptomsPage"
                Title="Select your symptoms">
    
    <Grid ColumnDefinitions="1*"
          RowDefinitions="8*, 1*">

        <popup:SfPopup Message=""
                       x:Name="Popup"
                       IsOpen="False"
                       HeaderTitle=""
                       StaysOpen="True"
                       HeaderHeight="0"
                       WidthRequest="125"
                       HeightRequest="125"
                       ShowCloseButton="False"
                       VerticalOptions="Center"
                       HorizontalOptions="Center">
                
            <popup:SfPopup.ContentTemplate>
                <DataTemplate>
                    <ActivityIndicator IsRunning="True"
                                       Color="#0074C0"
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center"
                                       Scale="2"/>
                </DataTemplate>
            </popup:SfPopup.ContentTemplate>

        </popup:SfPopup>

        <CollectionView Grid.Row="0"
                        x:Name="SymptomsCV"
                        SelectionMode="None"
                        ItemsSource="{Binding SymptomList}">

            <CollectionView.ItemTemplate>

                <DataTemplate x:DataType="models:Symptom">

                    <Grid RowDefinitions="*"
                          HeightRequest="75"
                          ColumnDefinitions="1*, 4*">

                        <CheckBox Grid.Column="0"
                                  Color="#0074C0"
                                  VerticalOptions="Fill"
                                  HorizontalOptions="Fill" 
                                  IsChecked="{Binding IsChecked}"/>

                        <Label FontSize="25"
                               Grid.Column="1"
                               Text="{Binding Name}"
                               VerticalOptions="Fill"
                               LineBreakMode="WordWrap"
                               HorizontalOptions="Fill"
                               VerticalTextAlignment="Center">

                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnSymptomTapped"/>
                            </Label.GestureRecognizers>

                        </Label>

                    </Grid>

                </DataTemplate>

            </CollectionView.ItemTemplate>

        </CollectionView>

        <Button Grid.Row="1"
                FontSize="30"
                CornerRadius="0"
                TextColor="white"
                Text="Enter symptoms"
                Clicked="OnEnterClicked"
                BackgroundColor="#0074C0"
                VerticalOptions="Fill"
                HorizontalOptions="Fill" />

    </Grid>

</ContentPage>